<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SyncTeX: &lt;strong&gt;SyncTeX&lt;/strong&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SyncTeX
   </div>
   <div id="projectbrief">Adding SyncTeX support to TeX engines or desktop applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><b>SyncTeX</b> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This file is part of the <b>SyncTeX</b> package.</p>
<p>Version: see <a class="el" href="synctex__version_8h_source.html">synctex_version.h</a> Latest Revision: Thu Mar 21 14:12:58 UTC 2024</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Important</h1>
<ul>
<li>Changes in version <code>1.3</code><ul>
<li>interactive mode<ul>
<li>parse int policy (for testing)</li>
<li>Build with meson</li>
<li>Typos in code</li>
<li>Better naming convention is code</li>
</ul>
</li>
<li>More explanations in the code<ul>
<li>Memory leaks fixed</li>
<li>Fixed compilation (MSVC)</li>
<li>Fixed compilation warnings (clang, gcc)</li>
<li>Fixed implicit declarations (vasprintf)</li>
<li>less recursion</li>
</ul>
</li>
</ul>
</li>
<li>Changes in version <code>1.22</code><ul>
<li>Typos fixed in code and printed comments</li>
<li>Code cleaning (<code>static</code> keyword added)</li>
<li>Bug fixed (Missing <code>va_end</code>)</li>
</ul>
</li>
<li>Changes in version <code>1.22</code><ul>
<li>Typos fixed in code and printed comments</li>
<li>Code cleaning (<code>static</code> keyword added)</li>
<li>Bug fixed (Missing <code>va_end</code>)</li>
</ul>
</li>
<li>Changes in version <code>1.21</code><ul>
<li>Remove a <code>\</code> character from the name ot 2 test files.</li>
<li>Change variable name <code>class</code> to <code>class_</code> because the former is a reserved keyword in C++.</li>
<li>Adding a more portable unused variable management.</li>
<li>Various cosmetic changes in the source code, including explicit declaration of <code>void</code> in forward function declaration.</li>
</ul>
</li>
<li><p class="startli">Changes in version <code>1.20</code></p>
<p class="startli">One bug fixed in some initialization and different syntax to make some compilers happy.</p>
</li>
<li><p class="startli">Changes in version <code>1.19</code></p>
<p class="startli">A long standing bug affecting only pdftex has been fixed by adding support to pdf forms. As a side effect, the synchronization algorithm gains in accuracy for all the engines, especially from pdf to source. Of course, there is a small cost in both memory footprint and computational time, but none is noticeable.</p>
<p class="startli">Some technical changes in the API.</p><ul>
<li><p class="startli">more consistent type naming convention</p><ul>
<li><code>_s</code> suffix for struct's</li>
<li><code>_p</code> suffix for pointers</li>
<li><code>_t</code> suffix for standard types</li>
<li><code>_f</code> suffix for functions...</li>
</ul>
<p class="startli">thus <code><a class="el" href="structsynctex__node__t.html" title="Node data model.">synctex_node_t</a></code> has become <code>synctex_node_p</code>.</p>
</li>
<li>supplemental argument in <code>synctex_display_query</code>. Set <code>page_hint</code> to the currently displayed pdf page number (0 based). If this info is not available, set <code>page_hint</code> to 0, it corresponds to the old behaviour.</li>
<li>rename <code>synctex_next_result</code> to <code>synctex_scanner_next_result</code></li>
<li>additional <code>synctex_parser_private.h</code> header where more API are exposed. For an advanced usage only (eg parallel synchronizations).</li>
<li><code>SYNCTEX_NO_UPDATER</code> preprocessor macro to deactivate some code useless to frontends.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
What is it ?</h1>
<p>The <em>Synchronization TeXnology</em> named <b>SyncTeX</b> is a new feature of recent <b>TeX</b> engines designed by Jérôme Laurens. It allows to synchronize between input and output, which means to navigate from the source document to the typeset material and vice versa. Browse the source code for more information.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Contents</h1>
<p>This package is mainly for developers, it contains the following files:</p>
<ul>
<li><code>synctex_parser_readme.md</code> (this file)</li>
<li><code>synctex_parser_version.txt</code></li>
<li><code>synctex_parser_utils.c</code></li>
<li><code><a class="el" href="synctex__parser__utils_8h_source.html">synctex_parser_utils.h</a></code></li>
<li><code><a class="el" href="synctex__parser__local_8h_source.html">synctex_parser_local.h</a></code></li>
<li><code><a class="el" href="synctex__parser_8h_source.html">synctex_parser.h</a></code></li>
<li><code><a class="el" href="synctex__parser__advanced_8h.html" title="More header declaration than in synctex_parser.h.">synctex_parser_advanced.h</a></code></li>
<li><code><a class="el" href="synctex__parser_8c.html" title="SyncTeX file parser and controller.">synctex_parser.c</a></code></li>
</ul>
<p>The file you are reading contains more informations about the <b>SyncTeX</b> parser history.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Source</h1>
<p>All stable sources are available from <a href="http://www.tug.org/svn/texlive/trunk/Build/source/texk/web2c/synctexdir/">TeXLive repository</a>.</p>
<p>Latest development sources are available from GitHub.</p>
<p>Please notice that due to the complexity of the TeXLive TeX distribution, there might be some delay before synchronization occurs between various repositories.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Usage</h1>
<p>In order to support <b>SyncTeX</b> in a viewer, it is sufficient to include in the source the files <code><a class="el" href="synctex__parser_8c.html" title="SyncTeX file parser and controller.">synctex_parser.c</a></code> and <code>synctex_parser_utils.c</code>. The synctex parser usage is described in <code><a class="el" href="synctex__parser_8h_source.html">synctex_parser.h</a></code> header file.</p>
<p>More advanced usage is found in <code><a class="el" href="synctex__parser__advanced_8h.html" title="More header declaration than in synctex_parser.h.">synctex_parser_advanced.h</a></code></p>
<p>The other files are used by tex engines or by the synctex command line utility:</p>
<div class="fragment"><div class="line">ChangeLog</div>
<div class="line">README.txt</div>
<div class="line">am</div>
<div class="line">man1</div>
<div class="line">man5</div>
<div class="line">synctex-common.h</div>
<div class="line">synctex-convert.sh</div>
<div class="line">synctex-e-mem.ch0</div>
<div class="line">synctex-e-mem.ch1</div>
<div class="line">synctex-e-rec.ch0</div>
<div class="line">synctex-e-rec.ch1</div>
<div class="line">synctex-etex.h</div>
<div class="line">synctex-mem.ch0</div>
<div class="line">synctex-mem.ch1</div>
<div class="line">synctex-mem.ch2</div>
<div class="line">synctex-pdf-rec.ch2</div>
<div class="line">synctex-pdftex.h</div>
<div class="line">synctex-rec.ch0</div>
<div class="line">synctex-rec.ch1</div>
<div class="line">synctex-rec.ch2</div>
<div class="line">synctex-tex.h</div>
<div class="line">synctex-xe-mem.ch2</div>
<div class="line">synctex-xe-rec.ch2</div>
<div class="line">synctex-xe-rec.ch3</div>
<div class="line">synctex-xetex.h</div>
<div class="line">synctex.c</div>
<div class="line">synctex.defines</div>
<div class="line">synctex.h</div>
<div class="line">synctex_main.c</div>
<div class="line">tests</div>
<div class="line">...</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Version:</h1>
<p>This is version 1, which refers to the synctex output file format.</p>
<p>The files are identified by a build number. In order to help developers to automatically manage the version and build numbers and download the parser only when necessary, the <code>synctex_parser_version.txt</code> is an ASCII text file just containing the current version and build numbers eg <code>1.19</code>.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
History:</h1>
<ul>
<li>1.1: Thu Jul 17 09:28:13 UTC 2008<ul>
<li>First official version available in TeXLive 2008 DVD. Unfortunately, the backwards synchronization is not working properly mainly for ConTeXt users, see below.</li>
</ul>
</li>
<li>1.2: Tue Sep 2 10:28:32 UTC 2008<ul>
<li>Correction for ConTeXt support in the edit query. The previous method was assuming that TeX boxes do not overlap, which is reasonable for LaTeX but not for ConTeXt. This assumption is no longer considered.</li>
</ul>
</li>
<li>1.3: Fri Sep 5 09:39:57 UTC 2008<ul>
<li>Local variable "read" renamed to "already_read" to avoid conflicts.</li>
<li>"inline" compiler directive renamed to "SYNCTEX_INLINE" for code support and maintenance</li>
<li>_synctex_error cannot be inlined due to variable arguments (thanks Christiaan Hofman)</li>
<li>Correction in the display query, extra boundary nodes are used for a more precise forwards synchronization</li>
</ul>
</li>
<li>1.4: Fri Sep 12 08:12:34 UTC 2008<ul>
<li>For an unknown reason, the previous version was not the real 1.3 (as used in iTeXMac2 build 747). As a consequence, a crash was observed.</li>
<li>Some typos are fixed.</li>
</ul>
</li>
<li>1.6: Mon Nov 3 20:20:02 UTC 2008<ul>
<li>The bug that prevented synchronization with compressed files on windows has been fixed.</li>
<li>New interface to allow system specific customization.</li>
<li>Note that some APIs have changed.</li>
</ul>
</li>
<li>1.8: Mer 8 jul 2009 11:32:38 UTC Note that version 1.7 was delivered privately.<ul>
<li>bug fix: synctex was causing a memory leak in pdftex and xetex, thus some processing speed degradation</li>
<li>bug fix: the synctex command line tool was broken when updating a .synctex file</li>
<li>enhancement: better accuracy of the synchronization process</li>
<li>enhancement: the pdf output file and the associated .synctex file no longer need to live in the same directory. The new -d option of the synctex command line tool manages this situation. This is handy when using something like tex -output-directory=DIR ...</li>
</ul>
</li>
<li>1.9: Wed Nov 4 11:52:35 UTC 2009<ul>
<li>Various typo fixed</li>
<li>OutputDebugString replaced by OutputDebugStringA to deliberately disable unicode preprocessing</li>
<li>New conditional created because OutputDebugStringA is only available since Windows 2K professional</li>
</ul>
</li>
<li>1.10: Sun Jan 10 10:12:32 UTC 2010<ul>
<li>Bug fix in <a class="el" href="synctex__parser_8c.html" title="SyncTeX file parser and controller.">synctex_parser.c</a> to solve a synchronization problem with amsmath's gather environment. Concerns the synctex tool.</li>
</ul>
</li>
<li>1.11: Sun Jan 17 09:12:31 UTC 2010<ul>
<li>Bug fix in <a class="el" href="synctex__parser_8c.html" title="SyncTeX file parser and controller.">synctex_parser.c</a>, function synctex_node_box_visible_v: 'x' replaced by 'y'. Only 3rd party tools are concerned.</li>
</ul>
</li>
<li>1.12: Mon Jul 19 21:52:10 UTC 2010<ul>
<li>Bug fix in <a class="el" href="synctex__parser_8c.html" title="SyncTeX file parser and controller.">synctex_parser.c</a>, function __synctex_open: the io_mode was modified even in case of a non zero return, causing a void .synctex.gz file to be created even if it was not expected. Reported by Marek Kasik concerning a bug on evince.</li>
</ul>
</li>
<li>1.13: Fri Mar 11 07:39:12 UTC 2011<ul>
<li>Bug fix in <a class="el" href="synctex__parser_8c.html" title="SyncTeX file parser and controller.">synctex_parser.c</a>, better synchronization as suggested by Jan Sundermeyer (near line 3388).</li>
<li>Stronger code design in synctex_parser_utils.c, function _synctex_get_name (really neutral behavior). Only 3rd party tools are concerned.</li>
</ul>
</li>
<li>1.14: Fri Apr 15 19:10:57 UTC 2011<ul>
<li>taking output_directory into account</li>
<li>Replaced FOPEN_WBIN_MODE by FOPEN_W_MODE when opening the text version of the .synctex file.</li>
<li>Merging with LuaTeX's version of synctex.c</li>
</ul>
</li>
<li>1.15: Fri Jun 10 14:10:17 UTC 2011 This concerns the synctex command line tool and 3rd party developers. TeX and friends are not concerned by these changes.<ul>
<li>Bug fixed in _synctex_get_io_mode_name, sometimes the wrong mode was returned</li>
<li>Support for LuaTeX convention of './' file prefixing</li>
</ul>
</li>
<li>1.16: Tue Jun 14 08:23:30 UTC 2011 This concerns the synctex command line tool and 3rd party developers. TeX and friends are not concerned by these changes.<ul>
<li>Better forward search (thanks Jose Alliste)</li>
<li>Support for LuaTeX convention of './' file prefixing now for everyone, not only for Windows</li>
</ul>
</li>
<li>1.17: Fri Oct 14 08:15:16 UTC 2011 This concerns the synctex command line tool and 3rd party developers. TeX and friends are not concerned by these changes.<ul>
<li><a class="el" href="synctex__parser_8c.html" title="SyncTeX file parser and controller.">synctex_parser.c</a>: cosmetic changes to enhance code readability</li>
<li>Better forward synchronization. The problem occurs for example with LaTeX <code>\item</code> command. The fact is that this command creates nodes at parse time but these nodes are used only after the text material of the <code>\item</code> is displayed on the page. The consequence is that sometimes, forward synchronization spots an irrelevant point from the point of view of the editing process. This was due to some very basic filtering policy, where a somehow arbitrary choice was made when many different possibilities where offered for synchronisation. Now, forward synchronization prefers nodes inside an hbox with as many acceptable spots as possible. This is achieved with the notion of mean line and node weight.</li>
<li>Adding support for the new file naming convention with './'<ul>
<li>function <code>synctex_ignore_leading_dot_slash_in_path replaces</code> <code>synctex_ignore_leading_dot_slash</code></li>
<li>function <code>_synctex_is_equivalent_file_name</code> is more permissive Previously, the function synctex_scanner_get_tag would give an answer only when the given file name was EXACTLY one of the file names listed in the synctex file. The we added some changes accepting for example 'foo.tex' instead of './foo.tex'. Now we have an even looser policy for dealing with file names. If the given file name does not match exactly one the file names of the synctex file, then we try to match the base names. If there is only one match of the base names, then it is taken as a match for the whole names. The base name is defined as following: <pre class="fragment">`./foo =&gt; foo
/my///.////foo =&gt; foo
/foo =&gt; /foo
/my//.foo =&gt; /my//.foo`
</pre></li>
</ul>
</li>
</ul>
</li>
<li>1.17: Tue Mar 13 10:10:03 UTC 2012<ul>
<li>minor changes, no version changes</li>
<li>syntax man pages are fixed as suggested by M. Shimata see mail to <a href="#" onclick="location.href='mai'+'lto:'+'tex'+'-l'+'ive'+'@t'+'ug.'+'or'+'g'; return false;">tex-l<span style="display: none;">.nosp@m.</span>ive@<span style="display: none;">.nosp@m.</span>tug.o<span style="display: none;">.nosp@m.</span>rg</a> titled "syntax.5 has many warnings from groff" and "syntax.1 use invalid macro for mdoc"</li>
<li>1.17: Tue Jan 14 09:55:00 UTC 2014, fixed a segfault, patch from Sebastian Ramacher</li>
<li>1.17: Mon Aug 04, fixed a memory leak</li>
</ul>
</li>
<li>1.18: Thu Jun 25 11:36:05 UTC 2015<ul>
<li>nested sheets now fully supported (does it make sense in TeX)</li>
<li>cosmetic changes: uniform indentation</li>
<li>suppression of warnings, mainly long/int ones. In short, zlib likes ints when size_t likes longs.</li>
<li>CLI synctex tool can build out of TeXLive (modulo appropriate options passed to the compiler)</li>
</ul>
</li>
<li>1.19: Mon Jul 3 20:03:56 UTC 2017<ul>
<li>the nested sheets patch was not a good solution. It has been moved from the parser to the engine. See the <code>synctex.c</code> source file for detailed explanations.</li>
<li>there is a new synctex format specification. We can see that a <code>.synctex</code> file can contain many times the same vertical position because many objects belong to the same line. When the options read <code>-synctex=±2</code> or more, a very basic compression algorithm is used: if synctex is about to write the same number then it writes an <code>=</code> sign instead. This saves approximately 10% of the synctex output file, either compressed or not. The new synctex parser has been updated accordingly. Actual tex frontend won't see any difference with the TeX engines that include this new feature. Frontends with the new parser won't see any difference with the older TeX engines. Frontends with the new parser will only see a difference with new TeX engines if <code>-synctex=±2</code> or more is used.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Acknowledgments:</h1>
<p>The author received useful remarks from the <b>pdfTeX</b> developers, especially Hahn The Thanh, and significant help from <b>XeTeX</b> developer Jonathan Kew. The Github repository keeps track of contributors like Stefan Löffler, who is now the leading developer of TeXworks, and many others.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Nota Bene:</h1>
<p>If you include or use a significant part of the <b>SyncTeX</b> package into a software, I would appreciate to be listed as contributor and see <b>SyncTeX</b>" highlighted.</p>
<p>Copyright (c) 2008-2024 jerome DOT laurens AT u-bourgogne DOT fr </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
